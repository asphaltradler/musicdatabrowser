<app-searchfield  [thisEntity]="entityType" [(searchEntity)]="searchEntityType" [(pageSize)]="pageSize"
                  [(searchString)]="searchName" [(filterString)]="filter"/>
<app-paging [entityList]="this"/>

<div class="card my-3">
  <app-list-header [title]="title" [lastSearchPerformance]="lastSearchPerformance"></app-list-header>
  <table class="card-body small table table-bordered table-striped table-hover table-sm my-0">
    <thead class="thead-dark">
    <tr>
      <th class="text-right">#</th>
      <th>Name</th>
      <th>{{ Album.namePlural }}</th>
      <th>{{ Composer.namePlural }}</th>
      <th>{{ Artist.namePlural }}</th>
      <th>{{ Work.namePlural }}</th>
      <th>{{ Genre.namePlural }}</th>
      <th>Label</th>
      <th>Jahr</th>
      <th class="text-right">Länge</th>
      <th class="col-long">Pfad</th>
      <th>Änd.</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let trackModel of getFilteredEntities(); trackBy: trackByEntityId">
      <td>{{ trackModel.entity.tracknumber }}</td>
      <td class="col-long">{{ trackModel.entity.name }}</td>
      <td class="col-long">
        <a (click)="navigateOtherEntityByThis(Album, trackModel.entity)" title="{{Album.namePlural}} für Track">
          {{ trackModel.entity.album?.name }}
        </a>
      </td>
      <td>
        <div *ngIf="trackModel.entity.composer">
          <a (click)="navigateOtherEntityByItself(Composer, trackModel.entity.composer)"
             title="Details für {{trackModel.entity.composer.name}}">
            {{ trackModel.entity.composer.name }}
          </a>
          <a (click)="navigateOtherEntityBy(Album, Composer, trackModel.entity.composer)"
             class="btn-link" title="{{ Album.namePlural}} für {{trackModel.entity.composer.name}}">
            [&nbsp;{{ Album.namePlural }}&nbsp;]
          </a>
        </div>
      </td>
      <td>
        <div *ngFor="let i of trackModel.entity.artists">
          <a (click)="navigateOtherEntityByItself(Artist, i)"
             title="Details für {{i.name}}">
            {{ i.name }}
          </a>
          <a (click)="navigateOtherEntityBy(Album, Artist, i)"
             class="btn-link"
             title="{{ Album.namePlural}} für {{i.name}}">
            [&nbsp;{{ Album.namePlural }}&nbsp;]
          </a>
        </div>
      </td>
      <td>
        <div *ngIf="trackModel.entity.work">
          <a (click)="navigateOtherEntityByItself(Work, trackModel.entity.work)"
             title="Details für {{trackModel.entity.work.name}}">
            {{ trackModel.entity.work.name }}
          </a>
          <a (click)="navigateOtherEntityBy(Album, Work, trackModel.entity.work)"
             class="btn-link"
             title="{{ Album.namePlural }} für {{ trackModel.entity.work.name }}">
            [&nbsp;{{ Album.namePlural }}&nbsp;]
          </a>
        </div>
      </td>
      <td>
        <div *ngFor="let g of trackModel.entity.genres">
          <a (click)="navigateOtherEntityByItself(Genre, g)"
             title="Details für {{g.name}}">
            {{ g.name }}
          </a>
          <a (click)="navigateOtherEntityBy(Album, Genre, g)"
             class="btn-link"
             title="{{ Album.namePlural}} für {{g.name}}">
            [&nbsp;{{ Album.namePlural }}&nbsp;]
          </a>
        </div>
      </td>
      <td>{{ trackModel.entity.publisher }}</td>
      <td>{{ trackModel.entity.publishedDate }}</td>
      <td class="text-right">{{ Track.getLength(trackModel.entity) }}</td>
      <td class="col-long">{{ trackModel.entity.path }}</td>
      <td>{{ Track.getLastModificationSince(trackModel.entity) }}</td>
    </tr>
    </tbody>
  </table>
</div>

<div class="my-3">&nbsp;</div>
<app-paging class="card footer-absolute" [entityList]="this"/>
